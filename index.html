<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Style Hub · Complete E-commerce Platform</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>
  
  <style>
    /* ==================== GLOBAL STYLES ==================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Noto Sans Bengali', sans-serif;
      background: #f8fafc;
      color: #1e293b;
      line-height: 1.5;
      transition: background-color 0.3s, color 0.3s;
    }

    /* Dark Mode */
    body.dark-mode {
      background: #0f172a;
      color: #f1f5f9;
    }

    body.dark-mode .header,
    body.dark-mode .product-card,
    body.dark-mode .filters-sidebar,
    body.dark-mode .products-section,
    body.dark-mode .admin-panel,
    body.dark-mode .orders-section,
    body.dark-mode .modal-content,
    body.dark-mode .payment-modal-content,
    body.dark-mode .chat-box,
    body.dark-mode .suggestions {
      background: #1e293b;
      border-color: #334155;
    }

    body.dark-mode .product-name,
    body.dark-mode .filter-section h3,
    body.dark-mode .nav-link,
    body.dark-mode .product-category,
    body.dark-mode .filter-option {
      color: #f1f5f9;
    }

    body.dark-mode .btn-outline {
      border-color: #475569;
      color: #f1f5f9;
    }

    body.dark-mode .btn-outline:hover {
      background: #334155;
    }

    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray: #64748b;
      --gray-light: #e2e8f0;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ==================== LANGUAGE SWITCHER ==================== */
    .lang-switcher {
      display: flex;
      gap: 8px;
      margin-right: 15px;
    }

    .lang-btn {
      padding: 6px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      background: transparent;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .lang-btn:hover {
      background: #e5eeff;
      border-color: var(--primary);
    }

    .lang-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* ==================== HEADER ==================== */
    .header {
      background: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 15px 0;
      transition: background-color 0.3s;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 20px;
    }

    .logo {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      cursor: pointer;
    }

    /* Theme Toggle */
    .theme-toggle {
      background: none;
      border: none;
      font-size: 1.3rem;
      cursor: pointer;
      color: var(--gray);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
    }

    .theme-toggle:hover {
      background: var(--gray-light);
    }

    body.dark-mode .theme-toggle:hover {
      background: #334155;
    }

    /* Search Bar */
    .search-container {
      flex: 1;
      max-width: 400px;
      position: relative;
    }

    .search-box {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #e2e8f0;
      border-radius: 40px;
      font-size: 1rem;
      transition: all 0.2s;
      font-family: 'Inter', 'Noto Sans Bengali', sans-serif;
    }

    .search-box:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
    }

    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-top: 5px;
      max-height: 300px;
      overflow-y: auto;
      display: none;
      z-index: 1000;
    }

    .suggestions.active {
      display: block;
    }

    .suggestion-item {
      padding: 12px 20px;
      cursor: pointer;
      transition: 0.2s;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .suggestion-item:hover {
      background: #f1f5f9;
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-item img {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      object-fit: cover;
    }

    /* Navigation */
    .nav-menu {
      display: flex;
      gap: 30px;
    }

    .nav-link {
      text-decoration: none;
      color: var(--dark);
      font-weight: 500;
      transition: 0.2s;
      position: relative;
    }

    .nav-link:hover {
      color: var(--primary);
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: 0.2s;
    }

    .nav-link:hover::after {
      width: 100%;
    }

    /* User Menu */
    .user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .icon-btn {
      position: relative;
      font-size: 1.3rem;
      cursor: pointer;
      color: var(--dark);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
      background: none;
      border: none;
    }

    .icon-btn:hover {
      background: var(--gray-light);
    }

    body.dark-mode .icon-btn:hover {
      background: #334155;
    }

    .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--secondary);
      color: white;
      font-size: 0.7rem;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 20px;
      min-width: 18px;
      text-align: center;
    }

    .auth-buttons {
      display: flex;
      gap: 10px;
    }

    /* Buttons */
    .btn {
      padding: 10px 24px;
      border-radius: 40px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.95rem;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'Inter', 'Noto Sans Bengali', sans-serif;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(37,99,235,0.2);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37,99,235,0.3);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-outline {
      background: transparent;
      border: 1px solid #e2e8f0;
    }

    .btn-outline:hover {
      background: #f1f5f9;
    }

    .btn-success {
      background: var(--secondary);
      color: white;
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-danger {
      background: var(--danger);
      color: white;
    }

    .btn-sm {
      padding: 6px 16px;
      font-size: 0.85rem;
    }

    /* ==================== FACEBOOK STYLE PROFILE ==================== */
    .profile-section {
      background: white;
      border-radius: 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      margin: 30px 0;
      overflow: hidden;
      transition: background-color 0.3s;
    }

    /* Cover Slider */
    .cover-slider {
      position: relative;
      height: 350px;
      overflow: hidden;
    }

    .cover-container {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .cover-slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      background-size: cover;
      background-position: center;
    }

    .cover-slide.active {
      opacity: 1;
    }

    .cover-overlay {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 8px 16px;
      border-radius: 30px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 10;
    }

    .cover-dots {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
    }

    .cover-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: 0.3s;
    }

    .cover-dot:hover {
      background: rgba(255,255,255,0.8);
    }

    .cover-dot.active {
      background: white;
      transform: scale(1.2);
    }

    /* Profile Info */
    .profile-info {
      padding: 20px;
      position: relative;
      display: flex;
      align-items: flex-end;
      gap: 20px;
    }

    .profile-picture {
      margin-top: -80px;
      position: relative;
      z-index: 10;
    }

    .profile-picture img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 4px solid white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      object-fit: cover;
    }

    .profile-picture-overlay {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: var(--primary);
      color: white;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 2px solid white;
      transition: 0.2s;
    }

    .profile-picture-overlay:hover {
      background: var(--primary-dark);
      transform: scale(1.1);
    }

    .profile-details {
      flex: 1;
    }

    .profile-details h2 {
      font-size: 1.8rem;
      margin-bottom: 5px;
    }

    .profile-details p {
      color: var(--gray);
      margin-bottom: 15px;
    }

    .profile-stats {
      display: flex;
      gap: 30px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-weight: 700;
      font-size: 1.2rem;
    }

    .stat-label {
      color: var(--gray);
      font-size: 0.9rem;
    }

    .profile-actions {
      display: flex;
      gap: 10px;
    }

    .profile-btn {
      padding: 8px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: 0.2s;
    }

    .profile-btn.primary {
      background: var(--primary);
      color: white;
    }

    .profile-btn.primary:hover {
      background: var(--primary-dark);
    }

    .profile-btn.secondary {
      background: #e4e6eb;
      color: #1e293b;
    }

    .profile-btn.secondary:hover {
      background: #d8dadf;
    }

    body.dark-mode .profile-btn.secondary {
      background: #334155;
      color: #f1f5f9;
    }

    body.dark-mode .profile-btn.secondary:hover {
      background: #475569;
    }

    /* ==================== PRODUCT CARD WITH SLIDER ==================== */
    .main-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
      margin: 30px 0;
    }

    /* Filters Sidebar */
    .filters-sidebar {
      background: white;
      border-radius: 24px;
      padding: 25px;
      position: sticky;
      top: 100px;
      height: fit-content;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      transition: background-color 0.3s;
    }

    .filter-section {
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e2e8f0;
    }

    .filter-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .filter-section h3 {
      font-size: 1rem;
      margin-bottom: 15px;
      color: var(--dark);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    .filter-option {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      font-size: 0.95rem;
      color: #475569;
    }

    .filter-option input[type="checkbox"] {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .price-inputs {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .price-inputs input {
      width: 100px;
      padding: 8px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
    }

    .sort-select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
      background: white;
      cursor: pointer;
    }

    body.dark-mode .sort-select {
      background: #334155;
      border-color: #475569;
      color: #f1f5f9;
    }

    /* Products Section */
    .products-section {
      background: white;
      border-radius: 24px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      transition: background-color 0.3s;
    }

    .products-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .products-header h2 {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .product-count {
      color: var(--gray);
      font-size: 0.95rem;
      background: #f1f5f9;
      padding: 5px 12px;
      border-radius: 30px;
    }

    body.dark-mode .product-count {
      background: #334155;
      color: #f1f5f9;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
    }

    /* Product Card */
    .product-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }

    /* Image Slider */
    .product-image-slider {
      position: relative;
      width: 100%;
      aspect-ratio: 1;
      overflow: hidden;
    }

    .slider-main-image {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .slider-main-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .product-card:hover .slider-main-image img {
      transform: scale(1.1);
    }

    .slider-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 35px;
      height: 35px;
      background: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s, background 0.2s;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .product-card:hover .slider-btn {
      opacity: 1;
    }

    .slider-btn:hover {
      background: var(--primary);
      color: white;
    }

    .slider-btn.left {
      left: 10px;
    }

    .slider-btn.right {
      right: 10px;
    }

    .thumbnail-container {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      background: rgba(255,255,255,0.9);
      padding: 8px 12px;
      border-radius: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 10;
      opacity: 0;
      transition: opacity 0.3s;
      backdrop-filter: blur(5px);
    }

    .product-card:hover .thumbnail-container {
      opacity: 1;
    }

    .thumbnail {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      overflow: hidden;
    }

    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .thumbnail:hover {
      transform: translateY(-2px);
      border-color: var(--primary);
    }

    .thumbnail.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary);
    }

    body.dark-mode .thumbnail-container {
      background: rgba(30, 41, 59, 0.9);
    }

    /* Product Info */
    .product-info {
      padding: 20px;
    }

    .product-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 5px;
      color: var(--dark);
    }

    .product-category {
      color: var(--gray);
      font-size: 0.85rem;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .product-rating {
      color: #fbbf24;
      margin: 8px 0;
      font-size: 0.9rem;
    }

    .product-price {
      font-weight: 700;
      font-size: 1.3rem;
      color: var(--primary);
      margin: 12px 0;
    }

    .product-stock {
      font-size: 0.85rem;
      margin-bottom: 10px;
    }

    .product-stock.in-stock {
      color: var(--secondary);
    }

    .product-stock.low-stock {
      color: var(--warning);
    }

    .product-stock.out-of-stock {
      color: var(--danger);
    }

    /* Variants */
    .product-variants {
      margin: 12px 0;
    }

    .variant-label {
      font-size: 0.85rem;
      color: var(--gray);
      margin-bottom: 5px;
    }

    .size-options {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .size-btn {
      min-width: 35px;
      height: 35px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      background: white;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .size-btn:hover,
    .size-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .color-options {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .color-dot {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
    }

    .color-dot:hover,
    .color-dot.active {
      transform: scale(1.2);
      border-color: var(--primary);
      box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary);
    }

    .product-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .btn-add-cart {
      flex: 1;
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
      font-size: 0.95rem;
    }

    .btn-add-cart:hover:not(:disabled) {
      background: var(--primary-dark);
    }

    .btn-add-cart:disabled {
      background: #cbd5e1;
      cursor: not-allowed;
    }

    .btn-review {
      width: 45px;
      height: 45px;
      border-radius: 30px;
      border: 1px solid #e2e8f0;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      color: var(--gray);
    }

    .btn-review:hover {
      background: #f1f5f9;
      color: var(--primary);
    }

    /* ==================== ADMIN PANEL ==================== */
    .admin-panel {
      background: white;
      border-radius: 24px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      transition: background-color 0.3s;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .admin-header h2 {
      font-size: 1.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .admin-tabs {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 10px 20px;
      border: 1px solid #e2e8f0;
      background: white;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .tab-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
    }

    .tab-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    body.dark-mode .tab-btn {
      background: #334155;
      border-color: #475569;
      color: #f1f5f9;
    }

    /* Analytics Cards */
    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .analytics-card {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 25px;
      border-radius: 16px;
    }

    .analytics-card.secondary {
      background: linear-gradient(135deg, var(--secondary), #059669);
    }

    .analytics-card.warning {
      background: linear-gradient(135deg, var(--warning), #d97706);
    }

    .analytics-value {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 10px 0;
    }

    .chart-container {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin: 20px 0;
      border: 1px solid #e2e8f0;
    }

    body.dark-mode .chart-container {
      background: #334155;
      border-color: #475569;
    }

    /* Product Form */
    .product-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
      padding: 20px;
      background: #f8fafc;
      border-radius: 16px;
    }

    .product-form input,
    .product-form select,
    .product-form textarea {
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
    }

    .product-form textarea {
      grid-column: 1 / -1;
      resize: vertical;
      min-height: 80px;
    }

    .image-upload-container {
      display: flex;
      gap: 15px;
      align-items: center;
      grid-column: 1 / -1;
    }

    .image-preview {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid #e2e8f0;
    }

    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .upload-progress {
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      margin-top: 10px;
      display: none;
      grid-column: 1 / -1;
    }

    .upload-progress.active {
      display: block;
    }

    .upload-progress-bar {
      height: 100%;
      background: var(--primary);
      border-radius: 2px;
      width: 0%;
      transition: width 0.3s;
    }

    .admin-products-list {
      display: grid;
      gap: 10px;
      max-height: 500px;
      overflow-y: auto;
      padding-right: 10px;
    }

    .admin-product-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      background: #f8fafc;
      border-radius: 12px;
    }

    .admin-product-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 8px;
    }

    .admin-product-info {
      flex: 1;
    }

    .admin-product-info strong {
      display: block;
      margin-bottom: 3px;
    }

    .admin-product-info small {
      color: var(--gray);
    }

    .admin-product-actions {
      display: flex;
      gap: 8px;
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-edit {
      background: var(--warning);
      color: white;
    }

    .btn-delete {
      background: var(--danger);
      color: white;
    }

    .btn-view {
      background: var(--primary);
      color: white;
    }

    .btn-export {
      background: var(--secondary);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
    }

    body.dark-mode .admin-product-item {
      background: #334155;
    }

    /* ==================== ORDER HISTORY ==================== */
    .orders-section {
      background: white;
      border-radius: 24px;
      padding: 30px;
      margin: 30px 0;
      transition: background-color 0.3s;
    }

    .order-card {
      background: #f8fafc;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid #e2e8f0;
    }

    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e2e8f0;
      flex-wrap: wrap;
      gap: 10px;
    }

    .order-id {
      font-weight: 600;
      color: var(--primary);
    }

    .order-date {
      color: var(--gray);
      font-size: 0.9rem;
    }

    .order-status {
      padding: 4px 12px;
      border-radius: 30px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .status-pending {
      background: #fef3c7;
      color: #92400e;
    }

    .status-processing {
      background: #dbeafe;
      color: #1e40af;
    }

    .status-shipped {
      background: #d1fae5;
      color: #065f46;
    }

    .status-delivered {
      background: #dcfce7;
      color: #166534;
    }

    .order-items {
      margin: 15px 0;
    }

    .order-item {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      color: #475569;
    }

    .order-total {
      font-weight: 700;
      text-align: right;
      padding-top: 10px;
      border-top: 1px solid #e2e8f0;
      margin-top: 10px;
    }

    .track-order-btn {
      background: none;
      border: 1px solid var(--primary);
      color: var(--primary);
      padding: 8px 16px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 0.9rem;
      margin-top: 10px;
      transition: 0.2s;
    }

    .track-order-btn:hover {
      background: var(--primary);
      color: white;
    }

    body.dark-mode .order-card {
      background: #334155;
      border-color: #475569;
    }

    /* ==================== NEWSLETTER SECTION ==================== */
    .newsletter-section {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 60px 20px;
      margin: 40px 0;
      border-radius: 40px;
      text-align: center;
    }

    .newsletter-content {
      max-width: 500px;
      margin: 0 auto;
    }

    .newsletter-content h3 {
      font-size: 2rem;
      margin-bottom: 15px;
      font-weight: 700;
    }

    .newsletter-content p {
      font-size: 1.1rem;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .newsletter-form {
      display: flex;
      gap: 10px;
      max-width: 400px;
      margin: 0 auto;
    }

    .newsletter-form input {
      flex: 1;
      padding: 15px 20px;
      border: none;
      border-radius: 40px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
    }

    .newsletter-form input:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(255,255,255,0.3);
    }

    .newsletter-form button {
      padding: 15px 30px;
    }

    /* ==================== CHAT WIDGET ==================== */
    .chat-widget {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
    }

    .chat-toggle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(37,99,235,0.3);
      transition: all 0.2s;
    }

    .chat-toggle:hover {
      transform: scale(1.1);
      background: var(--primary-dark);
    }

    .chat-box {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 350px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: none;
      overflow: hidden;
    }

    .chat-box.active {
      display: block;
    }

    .chat-header {
      background: var(--primary);
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header h4 {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .chat-header button {
      background: none;
      border: none;
      color: white;
      font-size: 1.3rem;
      cursor: pointer;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .chat-header button:hover {
      background: rgba(255,255,255,0.2);
    }

    .chat-messages {
      height: 300px;
      overflow-y: auto;
      padding: 20px;
      background: #f8fafc;
    }

    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
    }

    .message.bot {
      align-items: flex-start;
    }

    .message.user {
      align-items: flex-end;
    }

    .message-content {
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 18px;
      font-size: 0.95rem;
    }

    .bot .message-content {
      background: white;
      color: var(--dark);
      border-bottom-left-radius: 5px;
    }

    .user .message-content {
      background: var(--primary);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message-time {
      font-size: 0.7rem;
      color: var(--gray);
      margin-top: 3px;
    }

    .chat-input {
      display: flex;
      padding: 15px;
      background: white;
      border-top: 1px solid #e2e8f0;
    }

    .chat-input input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      margin-right: 10px;
      font-family: 'Inter', sans-serif;
    }

    .chat-input input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .chat-input button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
      transition: 0.2s;
    }

    .chat-input button:hover {
      background: var(--primary-dark);
    }

    body.dark-mode .chat-box {
      background: #1e293b;
    }

    body.dark-mode .chat-messages {
      background: #334155;
    }

    body.dark-mode .bot .message-content {
      background: #475569;
      color: #f1f5f9;
    }

    /* ==================== PAYMENT MODAL ==================== */
    .payment-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .payment-modal.active {
      display: flex;
    }

    .payment-modal-content {
      background: white;
      border-radius: 24px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlideIn 0.3s;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .payment-header {
      padding: 20px;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .payment-header h3 {
      font-size: 1.3rem;
      font-weight: 600;
    }

    .close-payment {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray);
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
    }

    .close-payment:hover {
      background: #f1f5f9;
    }

    body.dark-mode .close-payment:hover {
      background: #334155;
    }

    .payment-body {
      padding: 25px;
    }

    .order-summary {
      background: #f8fafc;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 25px;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      color: #475569;
    }

    .summary-total {
      display: flex;
      justify-content: space-between;
      font-weight: 700;
      font-size: 1.2rem;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 2px dashed #e2e8f0;
    }

    body.dark-mode .order-summary {
      background: #334155;
    }

    body.dark-mode .summary-item {
      color: #f1f5f9;
    }

    /* Payment Methods */
    .payment-methods {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }

    .payment-method {
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .payment-method:hover {
      border-color: var(--primary);
      background: #f0f9ff;
    }

    .payment-method.selected {
      border-color: var(--primary);
      background: #eff6ff;
      box-shadow: 0 4px 12px rgba(37,99,235,0.1);
    }

    .payment-method i {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .payment-method span {
      display: block;
      font-weight: 600;
    }

    .bkash { color: #e2136e; }
    .nagad { color: #f5821f; }
    .rocket { color: #662d91; }
    .card { color: var(--primary); }

    body.dark-mode .payment-method {
      border-color: #475569;
    }

    body.dark-mode .payment-method:hover {
      background: #334155;
    }

    body.dark-mode .payment-method.selected {
      background: #1e3a8a;
      border-color: var(--primary);
    }

    /* Payment Form */
    .payment-form {
      margin-top: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: var(--dark);
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      font-family: 'Inter', sans-serif;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
    }

    body.dark-mode .form-group input,
    body.dark-mode .form-group select {
      background: #334155;
      border-color: #475569;
      color: #f1f5f9;
    }

    .card-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .payment-footer {
      padding: 20px 25px;
      border-top: 1px solid #e2e8f0;
      display: flex;
      gap: 15px;
    }

    .payment-footer button {
      flex: 1;
      padding: 14px;
    }

    /* Success Animation */
    .payment-success {
      text-align: center;
      padding: 40px;
    }

    .success-animation {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: var(--secondary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: scaleIn 0.5s;
    }

    .success-animation i {
      font-size: 40px;
      color: white;
    }

    @keyframes scaleIn {
      from {
        transform: scale(0);
      }
      to {
        transform: scale(1);
      }
    }

    /* ==================== MODALS ==================== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1500;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 24px;
      width: 90%;
      max-width: 500px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      animation: modalSlideIn 0.3s;
    }

    .modal-content.large {
      max-width: 800px;
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray);
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
    }

    .close-modal:hover {
      background: #f1f5f9;
    }

    body.dark-mode .close-modal:hover {
      background: #334155;
    }

    /* Auth Form */
    .auth-form input,
    .auth-form textarea {
      width: 100%;
      padding: 12px 15px;
      margin: 8px 0;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
    }

    .auth-form input:focus {
      outline: none;
      border-color: var(--primary);
    }

    /* Rating Stars */
    .rating-input {
      display: flex;
      gap: 8px;
      margin: 20px 0;
      font-size: 1.5rem;
      color: #d1d5db;
      cursor: pointer;
      justify-content: center;
    }

    .rating-input i {
      transition: 0.2s;
    }

    .rating-input i:hover,
    .rating-input i.active {
      color: #fbbf24;
      transform: scale(1.1);
    }

    /* Cart Item */
    .cart-item {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }

    .cart-item img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 12px;
    }

    .cart-item-details {
      flex: 1;
    }

    .cart-item-title {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .cart-item-price {
      color: var(--primary);
      font-weight: 600;
    }

    .cart-item-variant {
      font-size: 0.85rem;
      color: var(--gray);
      margin: 3px 0;
    }

    .cart-item-remove {
      color: var(--danger);
      background: none;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 5px;
    }

    .cart-total {
      font-weight: 700;
      font-size: 1.2rem;
      text-align: right;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid #e2e8f0;
    }

    /* Wishlist Grid */
    .wishlist-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    .wishlist-item {
      text-align: center;
      padding: 15px;
      background: #f8fafc;
      border-radius: 12px;
    }

    .wishlist-item img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    body.dark-mode .wishlist-item {
      background: #334155;
    }

    /* Compare Table */
    .compare-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .compare-table th,
    .compare-table td {
      padding: 12px;
      border: 1px solid #e2e8f0;
      text-align: left;
    }

    .compare-table th {
      background: #f8fafc;
      font-weight: 600;
      width: 150px;
    }

    .compare-table td {
      color: #475569;
    }

    body.dark-mode .compare-table th {
      background: #334155;
      color: #f1f5f9;
    }

    body.dark-mode .compare-table td {
      color: #f1f5f9;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--dark);
      color: white;
      padding: 15px 30px;
      border-radius: 50px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      z-index: 3000;
      display: none;
      animation: slideIn 0.3s;
      max-width: 350px;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Loading Spinner */
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 50px;
    }

    .loading-spinner.active {
      display: block;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid #e2e8f0;
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .main-layout {
        grid-template-columns: 240px 1fr;
      }
    }

    @media (max-width: 768px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
      
      .filters-sidebar {
        position: static;
        margin-bottom: 20px;
      }
      
      .header-content {
        flex-direction: column;
        text-align: center;
      }
      
      .nav-menu {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
      }
      
      .user-menu {
        justify-content: center;
      }
      
      .profile-info {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      
      .profile-picture {
        margin-top: -60px;
      }
      
      .profile-picture img {
        width: 120px;
        height: 120px;
      }
      
      .profile-stats {
        justify-content: center;
      }
      
      .cover-slider {
        height: 200px;
      }
      
      .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .newsletter-form {
        flex-direction: column;
      }
      
      .payment-methods {
        grid-template-columns: 1fr;
      }
      
      .chat-box {
        width: 300px;
        right: 0;
      }
    }

    @media (max-width: 480px) {
      .product-grid {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        padding: 20px;
      }
      
      .auth-buttons {
        flex-direction: column;
      }
      
      .profile-actions {
        flex-direction: column;
        width: 100%;
      }
      
      .profile-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-content">
      <div class="logo" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">STYLE HUB</div>

      <!-- Language Switcher -->
      <div class="lang-switcher">
        <button class="lang-btn active" onclick="changeLanguage('en')">EN</button>
        <button class="lang-btn" onclick="changeLanguage('bn')">বাং</button>
        <button class="lang-btn" onclick="changeLanguage('hi')">हि</button>
      </div>

      <!-- Search Bar -->
      <div class="search-container">
        <input type="text" class="search-box" id="search-input" placeholder="Search products..." autocomplete="off">
        <div class="suggestions" id="suggestions"></div>
      </div>

      <!-- Navigation -->
      <nav class="nav-menu">
        <a href="#" class="nav-link">Home</a>
        <a href="#" class="nav-link">Shop</a>
        <a href="#" class="nav-link">New</a>
        <a href="#" class="nav-link">Sale</a>
      </nav>

      <!-- User Menu -->
      <div class="user-menu">
        <button class="icon-btn theme-toggle" onclick="toggleTheme()" title="Toggle theme">
          <i class="fas fa-moon"></i>
        </button>
        
        <button class="icon-btn" onclick="showWishlist()" title="Wishlist">
          <i class="far fa-heart"></i>
          <span class="badge" id="wishlist-count">0</span>
        </button>
        
        <button class="icon-btn" onclick="showCompare()" title="Compare">
          <i class="fas fa-balance-scale"></i>
          <span class="badge" id="compare-count">0</span>
        </button>
        
        <button class="icon-btn" onclick="showCart()" title="Cart">
          <i class="fas fa-shopping-bag"></i>
          <span class="badge" id="cart-count">0</span>
        </button>
        
        <div class="auth-buttons" id="auth-buttons">
          <button class="btn btn-outline btn-sm" onclick="showModal('auth-modal', 'login')">Login</button>
          <button class="btn btn-primary btn-sm" onclick="showModal('auth-modal', 'register')">Register</button>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
      <div class="spinner"></div>
      <p style="margin-top: 15px;">Loading data from Firebase...</p>
    </div>

    <!-- Admin Toggle -->
    <div id="admin-toggle" style="display: none; text-align: right; margin: 20px 0;">
      <button class="btn btn-outline" onclick="toggleAdminPanel()">
        <i class="fas fa-cog"></i> Admin Dashboard
      </button>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="admin-panel" style="display: none;">
      <div class="admin-header">
        <h2><i class="fas fa-crown" style="color: var(--warning);"></i> Admin Dashboard</h2>
        <div>
          <button class="btn-export" onclick="exportOrdersToCSV()">
            <i class="fas fa-download"></i> Export Orders
          </button>
          <button class="btn btn-outline" onclick="toggleAdminPanel()">Close</button>
        </div>
      </div>

      <div class="admin-tabs">
        <button class="tab-btn active" onclick="switchAdminTab('products')">Products</button>
        <button class="tab-btn" onclick="switchAdminTab('overview')">Overview</button>
        <button class="tab-btn" onclick="switchAdminTab('orders')">All Orders</button>
        <button class="tab-btn" onclick="switchAdminTab('users')">Users</button>
      </div>

      <!-- Overview Tab -->
      <div id="overview-tab" style="display: none;">
        <div class="analytics-grid">
          <div class="analytics-card">
            <i class="fas fa-dollar-sign"></i>
            <div class="analytics-value" id="total-revenue">$0</div>
            <div>Total Revenue</div>
          </div>
          <div class="analytics-card secondary">
            <i class="fas fa-shopping-bag"></i>
            <div class="analytics-value" id="total-orders">0</div>
            <div>Total Orders</div>
          </div>
          <div class="analytics-card warning">
            <i class="fas fa-users"></i>
            <div class="analytics-value" id="total-users">0</div>
            <div>Total Users</div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="sales-chart"></canvas>
        </div>
      </div>

      <!-- Products Tab -->
      <div id="products-tab">
        <div class="product-form" id="product-form">
          <input type="text" id="product-name" placeholder="Product Name">
          <input type="text" id="product-desc" placeholder="Description">
          <input type="number" id="product-price" placeholder="Price">
          <input type="number" id="product-stock" placeholder="Stock">
          <select id="product-category">
            <option value="Shirts">Shirts</option>
            <option value="T-Shirts">T-Shirts</option>
            <option value="Pants">Pants</option>
            <option value="Jeans">Jeans</option>
            <option value="Footwear">Footwear</option>
            <option value="Watches">Watches</option>
            <option value="Accessories">Accessories</option>
          </select>
          <textarea id="product-sizes" placeholder="Sizes (comma separated)"></textarea>
          <textarea id="product-colors" placeholder="Colors (comma separated)"></textarea>
          <div class="image-upload-container">
            <input type="file" id="product-image-file" accept="image/*" style="display: none;">
            <button class="btn btn-outline" type="button" onclick="document.getElementById('product-image-file').click()">
              <i class="fas fa-upload"></i> Upload Image
            </button>
            <div class="image-preview" id="image-preview">
              <img src="https://via.placeholder.com/60" alt="Preview">
            </div>
          </div>
          <input type="hidden" id="product-image-url">
          <div class="upload-progress" id="upload-progress">
            <div class="upload-progress-bar" id="upload-progress-bar"></div>
          </div>
          <button class="btn btn-primary" type="button" onclick="saveProduct()">Save Product</button>
        </div>

        <div class="admin-products-list" id="admin-products-list"></div>
      </div>

      <!-- Orders Tab -->
      <div id="orders-tab" style="display: none;">
        <div class="admin-products-list" id="admin-orders-list"></div>
      </div>

      <!-- Users Tab -->
      <div id="users-tab" style="display: none;">
        <div class="admin-products-list" id="admin-users-list"></div>
      </div>
    </div>

    <!-- Facebook Style Profile Section -->
    <div class="profile-section">
      <!-- Cover Slider -->
      <div class="cover-slider" id="coverSlider">
        <div class="cover-container">
          <div class="cover-slide active" style="background-image: url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1481437156560-3205f6a55735?w=1200')"></div>
        </div>
        
        <div class="cover-dots" id="coverDots">
          <span class="cover-dot active" onclick="changeCover(0)"></span>
          <span class="cover-dot" onclick="changeCover(1)"></span>
          <span class="cover-dot" onclick="changeCover(2)"></span>
          <span class="cover-dot" onclick="changeCover(3)"></span>
          <span class="cover-dot" onclick="changeCover(4)"></span>
        </div>

        <div class="cover-overlay">
          <i class="far fa-clock"></i>
          <span id="coverTimer">Auto changing in 5s</span>
        </div>
      </div>

      <!-- Profile Info -->
      <div class="profile-info">
        <div class="profile-picture">
          <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400" alt="Profile" id="profilePic">
          <div class="profile-picture-overlay" onclick="showEditProfile()">
            <i class="fas fa-camera"></i>
          </div>
        </div>
        
        <div class="profile-details">
          <h2 id="userName">Style Hub User</h2>
          <p id="userBio">Fashion enthusiast | Shop the latest trends</p>
          
          <div class="profile-stats">
            <div class="stat-item">
              <div class="stat-value" id="orderCount">0</div>
              <div class="stat-label">Orders</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="wishlistCount">5</div>
              <div class="stat-label">Wishlist</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="reviewCount">3</div>
              <div class="stat-label">Reviews</div>
            </div>
          </div>
        </div>

        <div class="profile-actions">
          <button class="profile-btn primary" onclick="showEditProfile()">
            <i class="fas fa-edit"></i> Edit Profile
          </button>
          <button class="profile-btn secondary" onclick="showSettings()">
            <i class="fas fa-cog"></i> Settings
          </button>
        </div>
      </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Filters Sidebar -->
      <aside class="filters-sidebar">
        <h3>Filters</h3>
        
        <div class="filter-section">
          <h4>Categories</h4>
          <div id="category-filters"></div>
        </div>

        <div class="filter-section">
          <h4>Price Range</h4>
          <div class="price-inputs">
            <input type="number" id="min-price" placeholder="Min" value="0">
            <span>-</span>
            <input type="number" id="max-price" placeholder="Max" value="1000">
          </div>
        </div>

        <div class="filter-section">
          <h4>Sizes</h4>
          <div class="filter-option">
            <input type="checkbox" value="S" onchange="applyFilters()"> S
          </div>
          <div class="filter-option">
            <input type="checkbox" value="M" onchange="applyFilters()"> M
          </div>
          <div class="filter-option">
            <input type="checkbox" value="L" onchange="applyFilters()"> L
          </div>
          <div class="filter-option">
            <input type="checkbox" value="XL" onchange="applyFilters()"> XL
          </div>
        </div>

        <div class="filter-section">
          <h4>Rating</h4>
          <select class="sort-select" id="rating-filter" onchange="applyFilters()">
            <option value="0">All Ratings</option>
            <option value="4">4★ & above</option>
            <option value="3">3★ & above</option>
            <option value="2">2★ & above</option>
          </select>
        </div>

        <div class="filter-section">
          <h4>Sort By</h4>
          <select class="sort-select" id="sort-by" onchange="applyFilters()">
            <option value="default">Default</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="rating">Top Rated</option>
          </select>
        </div>

        <button class="btn btn-primary" style="width: 100%;" onclick="applyFilters()">
          <i class="fas fa-filter"></i> Apply Filters
        </button>
      </aside>

      <!-- Products Section -->
      <section class="products-section">
        <div class="products-header">
          <h2>All Products</h2>
          <span class="product-count" id="product-count">70 products</span>
        </div>
        <div class="product-grid" id="product-grid"></div>
      </section>
    </div>

    <!-- Order History -->
    <section class="orders-section" id="orders-section" style="display: none;">
      <h2>My Orders</h2>
      <div id="orders-list"></div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter-section">
      <div class="newsletter-content">
        <h3>Subscribe to Newsletter</h3>
        <p>Get 10% off on your first order!</p>
        <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
          <input type="email" placeholder="Your email" required>
          <button type="submit" class="btn btn-primary">Subscribe</button>
        </form>
      </div>
    </section>
  </div>

  <!-- Chat Widget -->
  <div class="chat-widget">
    <button class="chat-toggle" onclick="toggleChat()">
      <i class="fas fa-comment"></i>
    </button>
    <div class="chat-box" id="chat-box">
      <div class="chat-header">
        <h4><i class="fas fa-headset"></i> Customer Support</h4>
        <button onclick="toggleChat()">×</button>
      </div>
      <div class="chat-messages" id="chat-messages"></div>
      <div class="chat-input">
        <input type="text" id="chat-input" placeholder="Type a message..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="payment-modal" id="payment-modal">
    <div class="payment-modal-content">
      <div class="payment-header">
        <h3>Complete Payment</h3>
        <button class="close-payment" onclick="closePaymentModal()">&times;</button>
      </div>
      <div class="payment-body" id="payment-body">
        <!-- Payment content will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal" id="auth-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('auth-modal')">&times;</span>
      <h2 id="auth-title">Login</h2>
      <form class="auth-form" onsubmit="handleAuth(event)">
        <input type="text" id="auth-name" placeholder="Full Name" style="display: none;">
        <input type="email" id="auth-email" placeholder="Email" required>
        <input type="password" id="auth-password" placeholder="Password" required>
        <button type="submit" class="btn btn-primary" style="width:100%; margin-top:15px;">Continue</button>
      </form>
    </div>
  </div>

  <!-- Review Modal -->
  <div class="modal" id="review-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('review-modal')">&times;</span>
      <h3>Write a Review</h3>
      <div class="rating-input" id="rating-stars">
        <i class="far fa-star" data-rating="1"></i>
        <i class="far fa-star" data-rating="2"></i>
        <i class="far fa-star" data-rating="3"></i>
        <i class="far fa-star" data-rating="4"></i>
        <i class="far fa-star" data-rating="5"></i>
      </div>
      <textarea id="review-text" placeholder="Your experience..." rows="4" style="width:100%; padding:12px; border:1px solid #e2e8f0; border-radius:8px; margin:10px 0;"></textarea>
      <button class="btn btn-primary" style="width:100%;" onclick="submitReview()">Submit Review</button>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal" id="cart-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('cart-modal')">&times;</span>
      <h3 id="cartTitle">Shopping Cart</h3>
      <div id="cart-items"></div>
      <div class="cart-total" id="cart-total">Total: $0.00</div>
      <button class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="proceedToPayment()" id="checkoutBtn">Checkout</button>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div class="modal" id="editProfileModal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('editProfileModal')">&times;</span>
      <h2>Edit Profile</h2>
      
      <div class="edit-form">
        <input type="text" id="editName" placeholder="Your Name" value="Style Hub User">
        <textarea id="editBio" placeholder="Your Bio">Fashion enthusiast | Shop the latest trends</textarea>
        <input type="text" id="editPic" placeholder="Profile Picture URL" value="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=200">
        <button class="save-btn" onclick="saveProfile()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ==================== FIREBASE CONFIG ====================
    const firebaseConfig = {
      apiKey: "AIzaSyDxOMNduC5AU5AaHmga2yC_V3RHjhX2ykQ",
      authDomain: "style-hub-fe257.firebaseapp.com",
      projectId: "style-hub-fe257",
      storageBucket: "style-hub-fe257.firebasestorage.app",
      messagingSenderId: "544518937543",
      appId: "1:544518937543:web:74dbc18a88b1f1d16f97e2"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    // ==================== LANGUAGE TRANSLATIONS ====================
    const translations = {
      en: {
        login: 'Login',
        register: 'Register',
        logout: 'Logout',
        cart: 'Shopping Cart',
        checkout: 'Checkout',
        'add-to-cart': 'Add to Cart',
        total: 'Total',
        emptyCart: 'Cart is empty',
        wishlist: 'Wishlist',
        compare: 'Compare',
        filters: 'Filters',
        categories: 'Categories',
        price: 'Price Range',
        sizes: 'Sizes',
        rating: 'Rating',
        sort: 'Sort By',
        apply: 'Apply Filters',
        search: 'Search products...',
        added: 'Added to cart!',
        removed: 'Removed from cart',
        processing: 'Processing payment...',
        success: 'Payment successful!',
        orderSummary: 'Order Summary',
        subtotal: 'Subtotal',
        shipping: 'Shipping',
        free: 'Free',
        payNow: 'Pay Now'
      },
      bn: {
        login: 'লগইন',
        register: 'রেজিস্টার',
        logout: 'লগআউট',
        cart: 'শপিং কার্ট',
        checkout: 'চেকআউট',
        'add-to-cart': 'কার্টে যোগ করুন',
        total: 'মোট',
        emptyCart: 'কার্ট খালি',
        wishlist: 'পছন্দের তালিকা',
        compare: 'তুলনা',
        filters: 'ফিল্টার',
        categories: 'ক্যাটাগরি',
        price: 'মূল্য সীমা',
        sizes: 'সাইজ',
        rating: 'রেটিং',
        sort: 'সাজান',
        apply: 'ফিল্টার প্রয়োগ',
        search: 'পণ্য খুঁজুন...',
        added: 'কার্টে যোগ হয়েছে!',
        removed: 'কার্ট থেকে সরানো হয়েছে',
        processing: 'পেমেন্ট প্রসেস হচ্ছে...',
        success: 'পেমেন্ট সফল হয়েছে!',
        orderSummary: 'অর্ডার সারাংশ',
        subtotal: 'সাবটোটাল',
        shipping: 'শিপিং',
        free: 'ফ্রি',
        payNow: 'এখনই পে করুন'
      },
      hi: {
        login: 'लॉगिन',
        register: 'रजिस्टर',
        logout: 'लॉगआउट',
        cart: 'कार्ट',
        checkout: 'चेकआउट',
        'add-to-cart': 'कार्ट में जोड़ें',
        total: 'कुल',
        emptyCart: 'कार्ट खाली है',
        wishlist: 'पसंदीदा',
        compare: 'तुलना',
        filters: 'फ़िल्टर',
        categories: 'श्रेणियाँ',
        price: 'मूल्य सीमा',
        sizes: 'आकार',
        rating: 'रेटिंग',
        sort: 'क्रमबद्ध करें',
        apply: 'फ़िल्टर लागू करें',
        search: 'उत्पाद खोजें...',
        added: 'कार्ट में जोड़ा गया!',
        removed: 'कार्ट से हटाया गया',
        processing: 'भुगतान प्रक्रिया...',
        success: 'भुगतान सफल!',
        orderSummary: 'ऑर्डर सारांश',
        subtotal: 'सबटोटल',
        shipping: 'शिपिंग',
        free: 'मुफ्त',
        payNow: 'अब भुगतान करें'
      }
    };

    let currentLang = 'en';

    // ==================== LANGUAGE FUNCTION ====================
    function changeLanguage(lang) {
      currentLang = lang;
      
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.includes(lang.toUpperCase()) || 
                                      (lang === 'bn' && btn.textContent.includes('বাং')) ||
                                      (lang === 'hi' && btn.textContent.includes('हि')));
      });

      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
          if (el.tagName === 'INPUT' && el.placeholder) {
            el.placeholder = translations[lang][key];
          } else {
            el.textContent = translations[lang][key];
          }
        }
      });

      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.placeholder = translations[lang].search;
      }

      document.getElementById('cartTitle').textContent = translations[lang].cart;
      document.getElementById('checkoutBtn').textContent = translations[lang].checkout;
    }

    // ==================== THEME TOGGLE ====================
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      const icon = document.querySelector('.theme-toggle i');
      if (document.body.classList.contains('dark-mode')) {
        icon.className = 'fas fa-sun';
        localStorage.setItem('theme', 'dark');
      } else {
        icon.className = 'fas fa-moon';
        localStorage.setItem('theme', 'light');
      }
    }

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
      document.querySelector('.theme-toggle i').className = 'fas fa-sun';
    }

    // ==================== COVER SLIDER ====================
    let currentCover = 0;
    let coverInterval;
    let countdown = 5;

    function startCoverSlider() {
      coverInterval = setInterval(() => {
        countdown--;
        document.getElementById('coverTimer').textContent = `Auto changing in ${countdown}s`;
        
        if (countdown <= 0) {
          const slides = document.querySelectorAll('.cover-slide');
          const dots = document.querySelectorAll('.cover-dot');
          
          slides[currentCover].classList.remove('active');
          dots[currentCover].classList.remove('active');
          
          currentCover = (currentCover + 1) % slides.length;
          
          slides[currentCover].classList.add('active');
          dots[currentCover].classList.add('active');
          countdown = 5;
        }
      }, 1000);
    }

    window.changeCover = function(index) {
      const slides = document.querySelectorAll('.cover-slide');
      const dots = document.querySelectorAll('.cover-dot');
      
      slides[currentCover].classList.remove('active');
      dots[currentCover].classList.remove('active');
      
      currentCover = index;
      
      slides[currentCover].classList.add('active');
      dots[currentCover].classList.add('active');
      
      countdown = 5;
    };

    // ==================== PRODUCTS DATA ====================
    const products = [
      {
        id: 1,
        name: 'Classic Oxford Shirt',
        desc: 'Premium cotton, wrinkle-free',
        price: 49.99,
        category: 'Shirts',
        images: [
          'https://images.unsplash.com/photo-1598033129075-9c5f7c7f3c7a?w=400',
          'https://images.unsplash.com/photo-1603252109303-2751441dd157?w=400',
          'https://images.unsplash.com/photo-1598032895397-b9472444bf93?w=400'
        ],
        rating: 4.5,
        sizes: ['S', 'M', 'L', 'XL'],
        colors: ['White', 'Blue', 'Black'],
        stock: 45
      },
      {
        id: 2,
        name: 'Slim Fit Jeans',
        desc: 'Stretch denim, classic blue',
        price: 79.99,
        category: 'Jeans',
        images: [
          'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=400',
          'https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=400',
          'https://images.unsplash.com/photo-1542272604-787c3835535d?w=400'
        ],
        rating: 4.6,
        sizes: ['30', '32', '34', '36', '38'],
        colors: ['Blue', 'Black', 'Gray'],
        stock: 48
      },
      {
        id: 3,
        name: 'Running Sneakers',
        desc: 'Lightweight mesh, cushioned sole',
        price: 89.99,
        category: 'Footwear',
        images: [
          'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400',
          'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=400',
          'https://images.unsplash.com/photo-1608256246200-53e635b7089d?w=400'
        ],
        rating: 4.7,
        sizes: ['7', '8', '9', '10', '11', '12'],
        colors: ['White', 'Black', 'Blue'],
        stock: 52
      },
      {
        id: 4,
        name: 'Leather Watch',
        desc: 'Stainless steel, water resistant',
        price: 149.99,
        category: 'Watches',
        images: [
          'https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=400',
          'https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?w=400',
          'https://images.unsplash.com/photo-1539874754764-5a96559165b0?w=400'
        ],
        rating: 4.8,
        sizes: ['One Size'],
        colors: ['Brown', 'Black'],
        stock: 25
      },
      {
        id: 5,
        name: 'Cotton T-Shirt',
        desc: '100% cotton, printed design',
        price: 24.99,
        category: 'T-Shirts',
        images: [
          'https://images.unsplash.com/photo-1581655353564-df123a1eb820?w=400',
          'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400',
          'https://images.unsplash.com/photo-1503342394128-c104d54dba01?w=400'
        ],
        rating: 4.2,
        sizes: ['S', 'M', 'L', 'XL'],
        colors: ['Black', 'White', 'Gray'],
        stock: 60
      },
      {
        id: 6,
        name: 'Summer Hat',
        desc: 'Straw fedora, sun protection',
        price: 19.99,
        category: 'Accessories',
        images: [
          'https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?w=400',
          'https://images.unsplash.com/photo-1556909211-36987daf7b4d?w=400',
          'https://images.unsplash.com/photo-1588850567234-5b6a3aa7f1c1?w=400'
        ],
        rating: 4.3,
        sizes: ['One Size'],
        colors: ['Beige', 'Brown', 'Black'],
        stock: 38
      }
    ];

    // Generate 70 products
    for (let i = 7; i <= 70; i++) {
      const base = products[i % 6];
      products.push({
        id: i,
        name: `${base.name} ${Math.floor(i/5)}`,
        desc: base.desc,
        price: base.price + (i % 20),
        category: base.category,
        images: base.images,
        rating: Math.min(5, 3.5 + (i % 15) / 10),
        sizes: base.sizes,
        colors: base.colors,
        stock: Math.max(0, 50 - i)
      });
    }

    // ==================== CART ====================
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Display Products
    function displayProducts(productsToShow = products) {
      const grid = document.getElementById('product-grid');
      
      grid.innerHTML = productsToShow.map(p => {
        const stockClass = p.stock > 10 ? 'in-stock' : p.stock > 0 ? 'low-stock' : 'out-of-stock';
        const stockText = p.stock > 10 ? 'In Stock' : p.stock > 0 ? `Only ${p.stock} left` : 'Out of Stock';

        return `
        <div class="product-card" data-id="${p.id}">
          <div class="product-image-slider" id="slider-${p.id}">
            <div class="slider-main-image">
              <img src="${p.images[0]}" alt="${p.name}" id="main-img-${p.id}">
            </div>
            <button class="slider-btn left" onclick="changeImage(${p.id}, -1)">❮</button>
            <button class="slider-btn right" onclick="changeImage(${p.id}, 1)">❯</button>
            <div class="thumbnail-container">
              ${p.images.map((img, idx) => `
                <div class="thumbnail ${idx === 0 ? 'active' : ''}" onclick="setImage(${p.id}, ${idx})">
                  <img src="${img}" alt="thumb">
                </div>
              `).join('')}
            </div>
          </div>
          <div class="product-info">
            <div class="product-name">${p.name}</div>
            <div class="product-category">${p.category}</div>
            <div class="product-rating">
              ${generateStars(p.rating)} (${p.rating.toFixed(1)})
            </div>
            
            <div class="product-variants">
              <div class="variant-label">Size:</div>
              <div class="size-options">
                ${p.sizes.map(s => `
                  <button class="size-btn" onclick="selectSize(${p.id}, '${s}')">${s}</button>
                `).join('')}
              </div>
            </div>

            <div class="product-variants">
              <div class="variant-label">Color:</div>
              <div class="color-options">
                ${p.colors.map(c => `
                  <span class="color-dot" style="background: ${c.toLowerCase()};" 
                        onclick="selectColor(${p.id}, '${c}')"></span>
                `).join('')}
              </div>
            </div>

            <div class="product-price">$${p.price.toFixed(2)}</div>
            <div class="product-stock ${stockClass}">${stockText}</div>
            
            <div class="product-actions">
              <button class="btn-add-cart" onclick="addToCart(${p.id})" ${p.stock === 0 ? 'disabled' : ''}>
                <i class="fas fa-cart-plus"></i> ${translations[currentLang]['add-to-cart']}
              </button>
            </div>
          </div>
        </div>
      `}).join('');

      document.getElementById('product-count').textContent = `${productsToShow.length} products`;
      updateCartCount();
    }

    // Image Slider Functions
    window.changeImage = function(productId, direction) {
      const product = products.find(p => p.id === productId);
      const mainImg = document.getElementById(`main-img-${productId}`);
      const currentSrc = mainImg.src;
      const currentIndex = product.images.findIndex(img => img === currentSrc);
      let newIndex = currentIndex + direction;
      
      if (newIndex < 0) newIndex = product.images.length - 1;
      if (newIndex >= product.images.length) newIndex = 0;
      
      setImage(productId, newIndex);
    };

    window.setImage = function(productId, index) {
      const product = products.find(p => p.id === productId);
      document.getElementById(`main-img-${productId}`).src = product.images[index];
      
      document.querySelectorAll(`#slider-${productId} .thumbnail`).forEach((thumb, i) => {
        thumb.classList.toggle('active', i === index);
      });
    };

    function generateStars(rating) {
      let stars = '';
      for (let i = 1; i <= 5; i++) {
        if (i <= Math.floor(rating)) {
          stars += '<i class="fas fa-star"></i>';
        } else if (i - rating < 1 && i - rating > 0) {
          stars += '<i class="fas fa-star-half-alt"></i>';
        } else {
          stars += '<i class="far fa-star"></i>';
        }
      }
      return stars;
    }

    // Size/Color Selection
    let selectedSizes = {};
    let selectedColors = {};

    window.selectSize = function(productId, size) {
      selectedSizes[productId] = size;
      document.querySelectorAll(`[data-id="${productId}"] .size-btn`).forEach(btn => {
        btn.classList.toggle('active', btn.textContent === size);
      });
    };

    window.selectColor = function(productId, color) {
      selectedColors[productId] = color;
      document.querySelectorAll(`[data-id="${productId}"] .color-dot`).forEach(dot => {
        dot.classList.toggle('active', dot.style.backgroundColor === color.toLowerCase());
      });
    };

    // Cart Functions
    window.addToCart = function(productId) {
      const product = products.find(p => p.id === productId);
      if (product.stock === 0) {
        showToast('Out of stock');
        return;
      }

      const size = selectedSizes[productId] || product.sizes[0];
      const color = selectedColors[productId] || product.colors[0];

      const cartItem = cart.find(item => 
        item.id === productId && item.size === size && item.color === color
      );

      if (cartItem) {
        if (cartItem.quantity < product.stock) {
          cartItem.quantity++;
        } else {
          showToast('Max stock reached');
          return;
        }
      } else {
        cart.push({ ...product, quantity: 1, size, color });
      }

      updateCart();
      showToast(translations[currentLang].added);
    };

    function updateCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      document.getElementById('orderCount').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').textContent = count;
    }

    window.showCart = function() {
      const modal = document.getElementById('cart-modal');
      const itemsDiv = document.getElementById('cart-items');
      const totalSpan = document.getElementById('cart-total');
      
      if (cart.length === 0) {
        itemsDiv.innerHTML = `<p style="text-align:center; color:var(--gray);">${translations[currentLang].emptyCart}</p>`;
        totalSpan.textContent = `${translations[currentLang].total}: $0.00`;
      } else {
        itemsDiv.innerHTML = cart.map(item => `
          <div class="cart-item">
            <img src="${item.images[0]}" alt="${item.name}">
            <div class="cart-item-details">
              <div class="cart-item-title">${item.name}</div>
              <div class="cart-item-variant">${item.size} | ${item.color}</div>
              <div class="cart-item-price">$${item.price} x ${item.quantity}</div>
            </div>
            <div>
              <div style="font-weight:600;">$${(item.price * item.quantity).toFixed(2)}</div>
              <button class="cart-item-remove" onclick="removeFromCart('${item.id}_${item.size}_${item.color}')">
                <i class="fas fa-trash"></i> Remove
              </button>
            </div>
          </div>
        `).join('');

        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        totalSpan.textContent = `${translations[currentLang].total}: $${total.toFixed(2)}`;
      }

      modal.classList.add('active');
    };

    window.removeFromCart = function(itemKey) {
      const [id, size, color] = itemKey.split('_');
      cart = cart.filter(item => !(item.id == id && item.size === size && item.color === color));
      updateCart();
      showCart();
      showToast(translations[currentLang].removed);
    };

    // ==================== PAYMENT SYSTEM ====================
    let selectedMethod = 'bkash';

    window.proceedToPayment = function() {
      closeModal('cart-modal');
      
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const shipping = subtotal > 100 ? 0 : 10;
      const total = subtotal + shipping;

      const body = document.getElementById('payment-body');
      body.innerHTML = `
        <div class="order-summary">
          <h4>${translations[currentLang].orderSummary}</h4>
          <div class="summary-item">
            <span>${translations[currentLang].subtotal}:</span>
            <span>$${subtotal.toFixed(2)}</span>
          </div>
          <div class="summary-item">
            <span>${translations[currentLang].shipping}:</span>
            <span>${shipping === 0 ? translations[currentLang].free : '$' + shipping}</span>
          </div>
          <div class="summary-total">
            <span>${translations[currentLang].total}:</span>
            <span>$${total.toFixed(2)}</span>
          </div>
        </div>

        <h4>${translations[currentLang].selectPayment || 'Select Payment Method'}</h4>
        <div class="payment-methods">
          <div class="payment-method selected" onclick="selectPaymentMethod('bkash')">
            <i class="fas fa-mobile-alt bkash"></i>
            <span>bKash</span>
          </div>
          <div class="payment-method" onclick="selectPaymentMethod('nagad')">
            <i class="fas fa-mobile-alt nagad"></i>
            <span>Nagad</span>
          </div>
          <div class="payment-method" onclick="selectPaymentMethod('rocket')">
            <i class="fas fa-mobile-alt rocket"></i>
            <span>Rocket</span>
          </div>
          <div class="payment-method" onclick="selectPaymentMethod('card')">
            <i class="fas fa-credit-card card"></i>
            <span>Card</span>
          </div>
        </div>

        <div id="payment-form" class="payment-form"></div>

        <button class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="processPayment()">${translations[currentLang].payNow}</button>
      `;

      document.getElementById('payment-modal').classList.add('active');
      selectPaymentMethod('bkash');
    };

    window.selectPaymentMethod = function(method) {
      selectedMethod = method;
      
      document.querySelectorAll('.payment-method').forEach(el => {
        el.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');

      const formDiv = document.getElementById('payment-form');
      
      if (method === 'bkash' || method === 'nagad' || method === 'rocket') {
        formDiv.innerHTML = `
          <div class="form-group">
            <input type="tel" id="mobile" placeholder="Mobile Number (01XXXXXXXXX)">
          </div>
          <div class="form-group">
            <input type="text" id="trxid" placeholder="Transaction ID">
          </div>
          <div style="background:#f1f5f9; padding:15px; border-radius:8px; margin:15px 0;">
            <p>Send money to 019XXXXXXXX and enter transaction ID above</p>
          </div>
        `;
      } else {
        formDiv.innerHTML = `
          <div class="form-group">
            <input type="text" id="card" placeholder="Card Number">
          </div>
          <div class="card-details">
            <div class="form-group">
              <input type="text" id="expiry" placeholder="MM/YY">
            </div>
            <div class="form-group">
              <input type="text" id="cvv" placeholder="CVV">
            </div>
          </div>
          <div class="form-group">
            <input type="text" id="cardName" placeholder="Card Holder Name">
          </div>
        `;
      }
    };

    window.processPayment = function() {
      showToast(translations[currentLang].processing);
      
      setTimeout(() => {
        showToast(translations[currentLang].success);
        cart = [];
        updateCart();
        closePaymentModal();
        closeModal('cart-modal');
      }, 2000);
    };

    function closePaymentModal() {
      document.getElementById('payment-modal').classList.remove('active');
    }

    // ==================== PROFILE FUNCTIONS ====================
    window.showEditProfile = function() {
      document.getElementById('editProfileModal').classList.add('active');
    };

    window.saveProfile = function() {
      const name = document.getElementById('editName').value;
      const bio = document.getElementById('editBio').value;
      const pic = document.getElementById('editPic').value;

      document.getElementById('userName').textContent = name;
      document.getElementById('userBio').textContent = bio;
      document.getElementById('profilePic').src = pic;

      closeModal('editProfileModal');
      showToast('Profile updated!');
    };

    window.showSettings = function() {
      showToast('Settings coming soon!');
    };

    // ==================== FILTER FUNCTIONS ====================
    function loadCategoryFilters() {
      const categories = [...new Set(products.map(p => p.category))];
      const container = document.getElementById('category-filters');
      container.innerHTML = categories.map(cat => `
        <label class="filter-option">
          <input type="checkbox" value="${cat}" onchange="applyFilters()"> ${cat}
        </label>
      `).join('');
    }

    window.applyFilters = function() {
      let filtered = [...products];
      
      const selectedCats = [...document.querySelectorAll('#category-filters input:checked')].map(cb => cb.value);
      if (selectedCats.length) filtered = filtered.filter(p => selectedCats.includes(p.category));

      const min = parseFloat(document.getElementById('min-price').value) || 0;
      const max = parseFloat(document.getElementById('max-price').value) || 1000;
      filtered = filtered.filter(p => p.price >= min && p.price <= max);

      const selectedSizes = [...document.querySelectorAll('.filter-section input[type="checkbox"]:checked')]
        .map(cb => cb.value).filter(v => ['S', 'M', 'L', 'XL'].includes(v));
      if (selectedSizes.length) {
        filtered = filtered.filter(p => p.sizes.some(s => selectedSizes.includes(s)));
      }

      const minRating = parseFloat(document.getElementById('rating-filter').value);
      if (minRating > 0) filtered = filtered.filter(p => p.rating >= minRating);

      const sortBy = document.getElementById('sort-by').value;
      if (sortBy === 'price-low') filtered.sort((a, b) => a.price - b.price);
      else if (sortBy === 'price-high') filtered.sort((a, b) => b.price - a.price);
      else if (sortBy === 'rating') filtered.sort((a, b) => b.rating - a.rating);

      displayProducts(filtered);
    };

    // ==================== WISHLIST ====================
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

    window.showWishlist = function() {
      if (wishlist.length === 0) {
        showToast('Wishlist is empty');
        return;
      }

      const wishlistProducts = products.filter(p => wishlist.includes(p.id));
      const modal = document.createElement('div');
      modal.className = 'modal active';
      modal.innerHTML = `
        <div class="modal-content">
          <span class="close-modal" onclick="this.closest('.modal').remove()">&times;</span>
          <h3>${translations[currentLang].wishlist}</h3>
          <div class="wishlist-grid">
            ${wishlistProducts.map(p => `
              <div class="wishlist-item">
                <img src="${p.images[0]}" alt="${p.name}">
                <div style="font-weight:600; margin:10px 0;">${p.name}</div>
                <div>$${p.price}</div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    };

    document.getElementById('wishlist-count').textContent = wishlist.length;

    // ==================== COMPARE ====================
    let compareList = JSON.parse(localStorage.getItem('compareList')) || [];

    window.showCompare = function() {
      if (compareList.length < 2) {
        showToast('Select at least 2 products');
        return;
      }

      const compareProducts = products.filter(p => compareList.includes(p.id));
      let html = '<table class="compare-table"><tr><th>Feature</th>';
      compareProducts.forEach(p => html += `<th>${p.name}</th>`);
      html += '</tr>';

      const features = ['Price', 'Category', 'Rating', 'Sizes', 'Colors'];
      features.forEach(f => {
        html += `<tr><td>${f}</td>`;
        compareProducts.forEach(p => {
          if (f === 'Price') html += `<td>$${p.price}</td>`;
          else if (f === 'Category') html += `<td>${p.category}</td>`;
          else if (f === 'Rating') html += `<td>${p.rating} ★</td>`;
          else if (f === 'Sizes') html += `<td>${p.sizes.join(', ')}</td>`;
          else if (f === 'Colors') html += `<td>${p.colors.join(', ')}</td>`;
        });
        html += '</tr>';
      });
      html += '</table>';

      const modal = document.createElement('div');
      modal.className = 'modal active';
      modal.innerHTML = `
        <div class="modal-content large">
          <span class="close-modal" onclick="this.closest('.modal').remove()">&times;</span>
          <h3>${translations[currentLang].compare}</h3>
          ${html}
        </div>
      `;
      document.body.appendChild(modal);
    };

    document.getElementById('compare-count').textContent = compareList.length;

    // ==================== CHAT ====================
    window.toggleChat = function() {
      document.getElementById('chat-box').classList.toggle('active');
      if (!chatMessages.length) {
        addChatMessage('Bot', 'Hello! How can I help you today?');
      }
    };

    let chatMessages = [];

    function addChatMessage(sender, message) {
      chatMessages.push({ sender, message, time: new Date() });
      const chatDiv = document.getElementById('chat-messages');
      const messageClass = sender === 'Bot' ? 'bot' : 'user';
      const timeStr = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      chatDiv.innerHTML += `
        <div class="message ${messageClass}">
          <div class="message-content">${message}</div>
          <div class="message-time">${timeStr}</div>
        </div>
      `;
      chatDiv.scrollTop = chatDiv.scrollHeight;
    }

    window.sendMessage = function() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      if (!message) return;

      addChatMessage('User', message);
      input.value = '';

      setTimeout(() => {
        addChatMessage('Bot', 'Thanks for your message! Our team will respond shortly.');
      }, 1000);
    };

    // ==================== NEWSLETTER ====================
    window.subscribeNewsletter = function(e) {
      e.preventDefault();
      showToast('Thanks for subscribing!');
      e.target.reset();
    };

    // ==================== ADMIN ====================
    window.toggleAdminPanel = function() {
      const panel = document.getElementById('admin-panel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
    };

    // ==================== MODAL ====================
    window.closeModal = function(modalId) {
      document.getElementById(modalId).classList.remove('active');
    };

    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.classList.remove('active');
      }
      if (event.target.classList.contains('payment-modal')) {
        event.target.classList.remove('active');
      }
    };

    // ==================== TOAST ====================
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }

    // ==================== INIT ====================
    loadCategoryFilters();
    displayProducts();
    updateCartCount();
    startCoverSlider();
    changeLanguage('en');
    document.getElementById('wishlist-count').textContent = wishlist.length;
    document.getElementById('compare-count').textContent = compareList.length;
    document.getElementById('reviewCount').textContent = '3';
  </script>
</body>
  </html>
