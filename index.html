<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Style Hub · Complete E-commerce Platform</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  
  <style>
    /* ==================== GLOBAL STYLES ==================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Noto Sans Bengali', sans-serif;
      background: #f0f2f5;
      color: #1e293b;
    }

    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray: #64748b;
      --facebook-blue: #1877f2;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ==================== FACEBOOK STYLE PROFILE ==================== */
    .profile-section {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin: 20px 0;
      overflow: hidden;
    }

    /* Cover Photo Slider */
    .cover-slider {
      position: relative;
      height: 350px;
      overflow: hidden;
    }

    .cover-container {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .cover-slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      background-size: cover;
      background-position: center;
    }

    .cover-slide.active {
      opacity: 1;
    }

    .cover-overlay {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .cover-dots {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
    }

    .cover-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: 0.3s;
    }

    .cover-dot.active {
      background: white;
      transform: scale(1.2);
    }

    /* Profile Info */
    .profile-info {
      padding: 20px;
      position: relative;
      display: flex;
      align-items: flex-end;
      gap: 20px;
    }

    .profile-picture {
      margin-top: -80px;
      position: relative;
      z-index: 10;
    }

    .profile-picture img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 4px solid white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      object-fit: cover;
    }

    .profile-picture-overlay {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: var(--primary);
      color: white;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 2px solid white;
    }

    .profile-details {
      flex: 1;
    }

    .profile-details h2 {
      font-size: 1.8rem;
      margin-bottom: 5px;
    }

    .profile-details p {
      color: var(--gray);
      margin-bottom: 15px;
    }

    .profile-stats {
      display: flex;
      gap: 30px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-weight: 700;
      font-size: 1.2rem;
    }

    .stat-label {
      color: var(--gray);
      font-size: 0.9rem;
    }

    .profile-actions {
      display: flex;
      gap: 10px;
    }

    .profile-btn {
      padding: 8px 20px;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: 0.2s;
    }

    .profile-btn.primary {
      background: var(--primary);
      color: white;
    }

    .profile-btn.primary:hover {
      background: var(--primary-dark);
    }

    .profile-btn.secondary {
      background: #e4e6eb;
      color: #1e293b;
    }

    .profile-btn.secondary:hover {
      background: #d8dadf;
    }

    /* ==================== PRODUCTS SECTION ==================== */
    .products-section {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .section-header h2 {
      font-size: 1.5rem;
    }

    .view-all {
      color: var(--primary);
      cursor: pointer;
      font-weight: 500;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .product-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
      transition: 0.3s;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .product-info {
      padding: 15px;
    }

    .product-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .product-price {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 10px 0;
    }

    .btn-add-cart {
      width: 100%;
      padding: 10px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
    }

    .btn-add-cart:hover {
      background: var(--primary-dark);
    }

    /* ==================== LANGUAGE SWITCHER ==================== */
    .lang-switcher {
      display: flex;
      gap: 8px;
      margin-left: 20px;
    }

    .lang-btn {
      padding: 6px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      background: white;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 500;
      transition: 0.2s;
    }

    .lang-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* ==================== CART ==================== */
    .cart-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--primary);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .cart-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--danger);
      color: white;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 50%;
    }

    /* ==================== MODALS ==================== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .close {
      float: right;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* ==================== PAYMENT MODAL ==================== */
    .payment-methods {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }

    .payment-method {
      padding: 15px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
    }

    .payment-method.selected {
      border-color: var(--primary);
      background: #eff6ff;
    }

    .payment-method i {
      font-size: 2rem;
      margin-bottom: 5px;
    }

    .bkash { color: #e2136e; }
    .nagad { color: #f5821f; }
    .rocket { color: #662d91; }
    .card { color: var(--primary); }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
    }

    .btn {
      padding: 12px 24px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
    }

    .btn:hover {
      background: var(--primary-dark);
    }

    /* ==================== TOAST ==================== */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #1e293b;
      color: white;
      padding: 12px 24px;
      border-radius: 40px;
      z-index: 2000;
      display: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .profile-info {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      
      .profile-picture {
        margin-top: -60px;
      }
      
      .profile-picture img {
        width: 120px;
        height: 120px;
      }
      
      .cover-slider {
        height: 200px;
      }
    }
  </style>
</head>
<body>
  <!-- Cart Icon -->
  <div class="cart-icon" onclick="showCart()">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-badge" id="cartCount">0</span>
  </div>

  <!-- Language Switcher -->
  <div style="position: fixed; top: 20px; left: 20px; z-index: 100;">
    <div class="lang-switcher">
      <button class="lang-btn active" onclick="changeLanguage('en')">EN</button>
      <button class="lang-btn" onclick="changeLanguage('bn')">বাং</button>
      <button class="lang-btn" onclick="changeLanguage('hi')">हि</button>
    </div>
  </div>

  <div class="container">
    <!-- Facebook Style Profile Section -->
    <div class="profile-section">
      <!-- Cover Photo Slider -->
      <div class="cover-slider" id="coverSlider">
        <div class="cover-container">
          <div class="cover-slide active" style="background-image: url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?w=1200')"></div>
          <div class="cover-slide" style="background-image: url('https://images.unsplash.com/photo-1481437156560-3205f6a55735?w=1200')"></div>
        </div>
        
        <!-- Cover Dots -->
        <div class="cover-dots" id="coverDots">
          <span class="cover-dot active" onclick="changeCover(0)"></span>
          <span class="cover-dot" onclick="changeCover(1)"></span>
          <span class="cover-dot" onclick="changeCover(2)"></span>
          <span class="cover-dot" onclick="changeCover(3)"></span>
          <span class="cover-dot" onclick="changeCover(4)"></span>
        </div>

        <!-- Cover Timer -->
        <div class="cover-overlay">
          <i class="far fa-clock"></i>
          <span id="coverTimer">Auto changing in 5s</span>
        </div>
      </div>

      <!-- Profile Info -->
      <div class="profile-info">
        <div class="profile-picture">
          <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400" alt="Profile" id="profilePic">
          <div class="profile-picture-overlay" onclick="changeProfilePic()">
            <i class="fas fa-camera"></i>
          </div>
        </div>
        
        <div class="profile-details">
          <h2 id="userName">Style Hub User</h2>
          <p id="userBio">Fashion enthusiast | Shop the latest trends</p>
          
          <div class="profile-stats">
            <div class="stat-item">
              <div class="stat-value" id="orderCount">0</div>
              <div class="stat-label">Orders</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="wishlistCount">0</div>
              <div class="stat-label">Wishlist</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="reviewCount">0</div>
              <div class="stat-label">Reviews</div>
            </div>
          </div>
        </div>

        <div class="profile-actions">
          <button class="profile-btn primary" onclick="showEditProfile()">
            <i class="fas fa-edit"></i> Edit Profile
          </button>
          <button class="profile-btn secondary" onclick="showSettings()">
            <i class="fas fa-cog"></i> Settings
          </button>
        </div>
      </div>
    </div>

    <!-- Products Section -->
    <div class="products-section">
      <div class="section-header">
        <h2>Featured Products</h2>
        <span class="view-all" onclick="showAllProducts()">View All →</span>
      </div>
      <div class="product-grid" id="productGrid"></div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal" id="cartModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('cartModal')">&times;</span>
      <h2 id="cartTitle">Shopping Cart</h2>
      <div id="cartItems"></div>
      <div style="margin-top: 20px; font-weight: 700;" id="cartTotal">Total: $0</div>
      <button class="btn" style="margin-top: 20px;" onclick="showPaymentModal()" id="checkoutBtn">Checkout</button>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal" id="paymentModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('paymentModal')">&times;</span>
      <h2>Complete Payment</h2>
      
      <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin: 20px 0;">
        <h3>Order Summary</h3>
        <div id="paymentSummary"></div>
        <div style="font-weight: 700; margin-top: 10px;" id="paymentTotal"></div>
      </div>

      <h3>Select Payment Method</h3>
      <div class="payment-methods">
        <div class="payment-method" onclick="selectPaymentMethod('bkash')">
          <i class="fas fa-mobile-alt bkash"></i>
          <div>bKash</div>
        </div>
        <div class="payment-method" onclick="selectPaymentMethod('nagad')">
          <i class="fas fa-mobile-alt nagad"></i>
          <div>Nagad</div>
        </div>
        <div class="payment-method" onclick="selectPaymentMethod('rocket')">
          <i class="fas fa-mobile-alt rocket"></i>
          <div>Rocket</div>
        </div>
        <div class="payment-method" onclick="selectPaymentMethod('card')">
          <i class="fas fa-credit-card card"></i>
          <div>Card</div>
        </div>
      </div>

      <div id="paymentForm"></div>

      <button class="btn" style="margin-top: 20px;" onclick="processPayment()" id="payNowBtn">Pay Now</button>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div class="modal" id="editProfileModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('editProfileModal')">&times;</span>
      <h2>Edit Profile</h2>
      
      <div class="form-group">
        <label>Name</label>
        <input type="text" id="editName" value="Style Hub User">
      </div>
      
      <div class="form-group">
        <label>Bio</label>
        <input type="text" id="editBio" value="Fashion enthusiast | Shop the latest trends">
      </div>
      
      <div class="form-group">
        <label>Profile Picture URL</label>
        <input type="text" id="editProfilePic" value="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400">
      </div>
      
      <button class="btn" onclick="saveProfile()">Save Changes</button>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ==================== LANGUAGE TRANSLATIONS ====================
    const translations = {
      en: {
        cart: 'Shopping Cart',
        checkout: 'Checkout',
        total: 'Total',
        emptyCart: 'Cart is empty',
        added: 'Added to cart!',
        removed: 'Removed from cart',
        paymentSuccess: 'Payment successful!',
        processing: 'Processing payment...',
        payNow: 'Pay Now',
        completePayment: 'Complete Payment',
        orderSummary: 'Order Summary',
        selectPayment: 'Select Payment Method'
      },
      bn: {
        cart: 'শপিং কার্ট',
        checkout: 'চেকআউট',
        total: 'মোট',
        emptyCart: 'কার্ট খালি',
        added: 'কার্টে যোগ হয়েছে!',
        removed: 'কার্ট থেকে সরানো হয়েছে',
        paymentSuccess: 'পেমেন্ট সফল হয়েছে!',
        processing: 'পেমেন্ট প্রসেস হচ্ছে...',
        payNow: 'এখনই পে করুন',
        completePayment: 'পেমেন্ট সম্পন্ন করুন',
        orderSummary: 'অর্ডার সারাংশ',
        selectPayment: 'পেমেন্ট পদ্ধতি নির্বাচন করুন'
      },
      hi: {
        cart: 'कार्ट',
        checkout: 'चेकआउट',
        total: 'कुल',
        emptyCart: 'कार्ट खाली है',
        added: 'कार्ट में जोड़ा गया!',
        removed: 'कार्ट से हटाया गया',
        paymentSuccess: 'भुगतान सफल!',
        processing: 'भुगतान प्रक्रिया...',
        payNow: 'अब भुगतान करें',
        completePayment: 'भुगतान पूरा करें',
        orderSummary: 'ऑर्डर सारांश',
        selectPayment: 'भुगतान विधि चुनें'
      }
    };

    let currentLang = 'en';

    // ==================== COVER SLIDER ====================
    let currentCover = 0;
    let coverInterval;
    let countdown = 5;

    function startCoverSlider() {
      coverInterval = setInterval(() => {
        countdown--;
        document.getElementById('coverTimer').textContent = `Auto changing in ${countdown}s`;
        
        if (countdown <= 0) {
          nextCover();
          countdown = 5;
        }
      }, 1000);
    }

    function nextCover() {
      const slides = document.querySelectorAll('.cover-slide');
      const dots = document.querySelectorAll('.cover-dot');
      
      slides[currentCover].classList.remove('active');
      dots[currentCover].classList.remove('active');
      
      currentCover = (currentCover + 1) % slides.length;
      
      slides[currentCover].classList.add('active');
      dots[currentCover].classList.add('active');
    }

    window.changeCover = (index) => {
      const slides = document.querySelectorAll('.cover-slide');
      const dots = document.querySelectorAll('.cover-dot');
      
      slides[currentCover].classList.remove('active');
      dots[currentCover].classList.remove('active');
      
      currentCover = index;
      
      slides[currentCover].classList.add('active');
      dots[currentCover].classList.add('active');
      
      countdown = 5;
    };

    // ==================== PRODUCTS ====================
    const products = [
      {
        id: 1,
        name: 'Classic Oxford Shirt',
        price: 49.99,
        image: 'https://images.unsplash.com/photo-1598033129075-9c5f7c7f3c7a?w=400',
        category: 'Shirts'
      },
      {
        id: 2,
        name: 'Slim Fit Jeans',
        price: 79.99,
        image: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=400',
        category: 'Jeans'
      },
      {
        id: 3,
        name: 'Running Sneakers',
        price: 89.99,
        image: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400',
        category: 'Footwear'
      },
      {
        id: 4,
        name: 'Leather Watch',
        price: 149.99,
        image: 'https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=400',
        category: 'Watches'
      }
    ];

    // ==================== CART ====================
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function displayProducts() {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = products.map(p => `
        <div class="product-card">
          <img src="${p.image}" alt="${p.name}" class="product-image">
          <div class="product-info">
            <div class="product-name">${p.name}</div>
            <div class="product-price">$${p.price}</div>
            <button class="btn-add-cart" onclick="addToCart(${p.id})">
              <i class="fas fa-cart-plus"></i> Add to Cart
            </button>
          </div>
        </div>
      `).join('');
    }

    window.addToCart = (productId) => {
      const product = products.find(p => p.id === productId);
      const existing = cart.find(item => item.id === productId);
      
      if (existing) {
        existing.quantity++;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      
      updateCart();
      showToast(translations[currentLang].added);
    };

    function updateCart() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cartCount').textContent = count;
      localStorage.setItem('cart', JSON.stringify(cart));
      
      // Update profile stats
      document.getElementById('orderCount').textContent = count;
    }

    window.showCart = () => {
      const modal = document.getElementById('cartModal');
      const itemsDiv = document.getElementById('cartItems');
      const totalSpan = document.getElementById('cartTotal');
      
      if (cart.length === 0) {
        itemsDiv.innerHTML = `<p style="text-align:center;">${translations[currentLang].emptyCart}</p>`;
        totalSpan.textContent = `${translations[currentLang].total}: $0`;
      } else {
        itemsDiv.innerHTML = cart.map(item => `
          <div style="display:flex; gap:10px; margin-bottom:15px; padding-bottom:15px; border-bottom:1px solid #e2e8f0;">
            <img src="${item.image}" style="width:50px; height:50px; object-fit:cover; border-radius:5px;">
            <div style="flex:1;">
              <div style="font-weight:600;">${item.name}</div>
              <div>$${item.price} x ${item.quantity}</div>
            </div>
            <div>
              <div>$${(item.price * item.quantity).toFixed(2)}</div>
              <button onclick="removeFromCart(${item.id})" style="color:var(--danger); background:none; border:none; cursor:pointer;">Remove</button>
            </div>
          </div>
        `).join('');

        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        totalSpan.textContent = `${translations[currentLang].total}: $${total.toFixed(2)}`;
      }

      modal.classList.add('active');
    };

    window.removeFromCart = (productId) => {
      cart = cart.filter(item => item.id !== productId);
      updateCart();
      showCart();
      showToast(translations[currentLang].removed);
    };

    // ==================== PAYMENT SYSTEM (FIXED) ====================
    let selectedPaymentMethod = 'bkash';

    window.showPaymentModal = () => {
      closeModal('cartModal');
      
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const shipping = subtotal > 100 ? 0 : 10;
      const total = subtotal + shipping;

      document.getElementById('paymentSummary').innerHTML = `
        <div style="display:flex; justify-content:space-between; margin:5px 0;">
          <span>Subtotal:</span> <span>$${subtotal.toFixed(2)}</span>
        </div>
        <div style="display:flex; justify-content:space-between; margin:5px 0;">
          <span>Shipping:</span> <span>${shipping === 0 ? 'Free' : '$' + shipping}</span>
        </div>
      `;
      document.getElementById('paymentTotal').innerHTML = `Total: $${total.toFixed(2)}`;

      document.getElementById('paymentModal').classList.add('active');
      selectPaymentMethod('bkash');
    };

    window.selectPaymentMethod = (method) => {
      selectedPaymentMethod = method;
      
      document.querySelectorAll('.payment-method').forEach(el => {
        el.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');

      const formDiv = document.getElementById('paymentForm');
      
      if (method === 'bkash' || method === 'nagad' || method === 'rocket') {
        formDiv.innerHTML = `
          <div class="form-group">
            <label>Mobile Number</label>
            <input type="tel" id="mobileNumber" placeholder="01XXXXXXXXX" required>
          </div>
          <div class="form-group">
            <label>Transaction ID</label>
            <input type="text" id="trxID" placeholder="Enter transaction ID" required>
          </div>
          <div style="background:#f1f5f9; padding:15px; border-radius:8px; margin:15px 0;">
            <p style="margin:0;"><strong>Instructions:</strong> Send money to 019XXXXXXXX and enter the transaction ID above.</p>
          </div>
        `;
      } else {
        formDiv.innerHTML = `
          <div class="form-group">
            <label>Card Number</label>
            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
          </div>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
            <div class="form-group">
              <label>Expiry</label>
              <input type="text" id="expiry" placeholder="MM/YY" required>
            </div>
            <div class="form-group">
              <label>CVV</label>
              <input type="text" id="cvv" placeholder="123" required>
            </div>
          </div>
          <div class="form-group">
            <label>Card Holder</label>
            <input type="text" id="cardName" placeholder="Name on card" required>
          </div>
        `;
      }
    };

    window.processPayment = () => {
      // Validate form
      if (selectedPaymentMethod === 'bkash' || selectedPaymentMethod === 'nagad' || selectedPaymentMethod === 'rocket') {
        const mobile = document.getElementById('mobileNumber')?.value;
        const trx = document.getElementById('trxID')?.value;
        
        if (!mobile || !trx) {
          showToast('Please fill all fields');
          return;
        }
        if (!/^01[3-9]\d{8}$/.test(mobile)) {
          showToast('Invalid mobile number');
          return;
        }
      } else {
        const card = document.getElementById('cardNumber')?.value;
        const expiry = document.getElementById('expiry')?.value;
        const cvv = document.getElementById('cvv')?.value;
        const name = document.getElementById('cardName')?.value;
        
        if (!card || !expiry || !cvv || !name) {
          showToast('Please fill all fields');
          return;
        }
        if (!/^\d{16}$/.test(card.replace(/\s/g, ''))) {
          showToast('Invalid card number');
          return;
        }
        if (!/^\d{3}$/.test(cvv)) {
          showToast('Invalid CVV');
          return;
        }
      }

      showToast(translations[currentLang].processing);
      
      setTimeout(() => {
        showToast(translations[currentLang].paymentSuccess);
        cart = [];
        updateCart();
        closeModal('paymentModal');
        closeModal('cartModal');
      }, 2000);
    };

    // ==================== PROFILE FUNCTIONS ====================
    window.changeProfilePic = () => {
      document.getElementById('editProfilePic').value = document.getElementById('profilePic').src;
      showEditProfile();
    };

    window.showEditProfile = () => {
      document.getElementById('editName').value = document.getElementById('userName').textContent;
      document.getElementById('editBio').value = document.getElementById('userBio').textContent;
      document.getElementById('editProfilePic').value = document.getElementById('profilePic').src;
      document.getElementById('editProfileModal').classList.add('active');
    };

    window.saveProfile = () => {
      document.getElementById('userName').textContent = document.getElementById('editName').value;
      document.getElementById('userBio').textContent = document.getElementById('editBio').value;
      document.getElementById('profilePic').src = document.getElementById('editProfilePic').value;
      closeModal('editProfileModal');
      showToast('Profile updated!');
    };

    window.showSettings = () => {
      showToast('Settings coming soon!');
    };

    window.showAllProducts = () => {
      showToast('View all products coming soon!');
    };

    // ==================== LANGUAGE ====================
    window.changeLanguage = (lang) => {
      currentLang = lang;
      
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.includes(lang.toUpperCase()) || 
                                      (lang === 'bn' && btn.textContent.includes('বাং')) ||
                                      (lang === 'hi' && btn.textContent.includes('हि')));
      });

      document.getElementById('cartTitle').textContent = translations[lang].cart;
      document.getElementById('checkoutBtn').textContent = translations[lang].checkout;
      document.getElementById('payNowBtn').textContent = translations[lang].payNow;
      
      if (document.getElementById('cartModal').classList.contains('active')) {
        showCart();
      }
    };

    // ==================== UTILS ====================
    window.closeModal = (modalId) => {
      document.getElementById(modalId).classList.remove('active');
    };

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }

    // ==================== INIT ====================
    displayProducts();
    updateCart();
    startCoverSlider();
    changeLanguage('en');
    document.getElementById('wishlistCount').textContent = '12';
    document.getElementById('reviewCount').textContent = '8';
  </script>
</body>
  </html>
